@using System.Collections.Generic
@using Sandbox
@using Sandbox.Services
@using Sandbox.UI
@namespace TortureTerry
@inherits PanelComponent

<root>
	<img class="menuIcon" texture="@MenuIcon.ResourcePath" alt="" onclick=@( () => MenuOpen = !MenuOpen )/>
	<div class="@(MenuOpen ? "itemContainer" : "hide")">
		@foreach ( var i in Items )
		{
			<div class="entry">
				<image texture="@i.ItemIcon.ResourcePath" alt="" onclick="@( () => SpawnItem( i ) )"/>
				@* @if ( i.Locked && Stats.LocalPlayer.Get( i.Name ).Value == 0 ) *@
				@* { *@
				@* 	<div class="lock">ðŸ”’</div> *@
				@* } *@
			</div>
		}
	</div>
</root>

@code
{
	[Property] public Texture MenuIcon { get; set; }
	[Property] public List<Item> Items { get; set; }
	private bool MenuOpen { get; set; } = false;
	protected override void OnFixedUpdate()
	{
		
	}
	
	private void SpawnItem( Item i )
	{
		i.Prefab.Clone( Vector3.Zero.WithZ( 196 ) );
	}
	
	protected override int BuildHash()
	{
		return GameManager.Player.Score;
	}
}
